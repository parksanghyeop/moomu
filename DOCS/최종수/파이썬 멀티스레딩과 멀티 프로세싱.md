# 파이썬 멀티스레딩과 멀티 프로세싱

## 컴퓨터 구조와 운영체제 기본

### 컴퓨터의 구성 요소

- CPU : 명령어를 해석하여 실행하는 장치(중앙처리장치)
- 메모리
    - 주메모리 : 작업에 필요한 프로그램과 데이터를 저장하는 장소이다.
    - 보조메모리 : 저장장치라고 불리며 데이터를 일시적 또는 영구적으로 저장하는 장소이다.
- 입출력장치
- 시스템 버스 : 구성 요소를 연결하고 데이터를 주고 받는다.

### 운영체제(OS)

- 정의 : 컴퓨터 시스템을 운영하고 관리하는 소프트웨어
- 운영체제가 없다면 처음 설계한 대로만 사용할 수 있다.
- 프로그래밍이 가능하게 한다.

### 프로세스

- 프로그램 : 어떤 문제를 해결하기 위해 컴퓨터에게 주어지는 처리 방법과 순서를 기술한 일련의 명령문의 집합체, 개발자가 작성한 코드
- 저장장치(보조메모리)에 저장. 프로그램 바로가기 버튼을 눌러 실행
- 해당 프로그램의 작성된 코드들이 주메모리로 올라와 작업이 진행.
- 프로세스가 생성되면 CPU는 프로세스가 해야할 작업을 수행한다.

### 쓰레드

- CPU가 처리하는 작업의 단위가 바로 쓰레드, 프로세스 내에서 실행되는 여러 작업의 단위
- 싱글 or 멀티
- 멀티 쓰레딩에서 쓰레드는 다수의 쓰레드끼리 메모리 공유와 통신이 가능하다. → 자원의 낭비를 막고 효율성을 향상, but 문제가 생기면 전체 프로세스에 영향을 미친다.
- 사용자 수준 쓰레드 - 파이썬에서 대부분 사용
- 커널 수준 쓰레드 - 운영체제 공부해볼 것.

## 동시성 vs 병렬성

### 동시성(병행성) - concurrency

- 한 번에 여러 작업을 동시에 다루는 것.
- **스위칭**
- 동시성은 논리적 개념, 멀티 쓰레딩, 싱글 쓰레드에서 사용된다.
- 싱글 코어 뿐만 아니라 멀티 코어에서도 각각의 코어가 동시성을 사용할 수 있다.

### 병렬성 - parallelism

- 한 번에 여러 작업을 병렬적으로 처리하는 것을 의미.
- 멀티 쓰레딩
- 병렬성은 물리적 개념
- 멀티 코어에서 여러 작업을 병렬적으로 수행.

## 파이썬 멀티 쓰레딩

- map : generator 객체
- 파이썬에서는 병렬적으로 수행이 안된다.
- 코루틴을 쓰는것을 권장
- 쓰레드를 사용하면 메모리 점유율이 높다.

## 파이썬 멀티 프로세싱, GIL

### GIL

- 전역 인터프리터 잠금
- 한 번에 1개의 스레드만 유지하는 락
- 멀티 쓰레딩의 위험으로부터 보호
- 파이썬 멀티 쓰레딩은 동시성을 사용해서 io bound 코드에서 유용하게 사용할 수 있지만 cpu bound코드에서는 GIL에 의해 원하는 결과를 얻을 수 없다.
- 멀티 프로세싱의 비용이 더 크다.